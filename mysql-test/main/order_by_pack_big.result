set @save_rand_seed1=  @@RAND_SEED1;
set @save_rand_seed2=  @@RAND_SEED2;
set @@RAND_SEED1=810763568, @@RAND_SEED2=600681772;
create table t1(a int);
insert into t1 select seq from seq_1_to_10000 order by rand();
CREATE FUNCTION f1(median INT) RETURNS DOUBLE
BEGIN
set @z = (rand() + rand() + rand() + rand() + rand() + rand())/6;
set @z = @z*median*2+1;
return round(@z);
END|
CREATE function f2(len INT) RETURNS varchar(256)
BEGIN
DECLARE str VARCHAR(256) DEFAULT '';
DECLARE x INT DEFAULT 0;
WHILE (len > 0 AND len < 256) DO
SET x =round(rand()*25);
SET str= CONCAT(str, CHAR(65 + x));
SET len= len-1;
END WHILE;
RETURN str;
END|
create table t3 (id INT NOT NULL, a INT, b int);
insert into t3  select a, f1(12), f1(32) from t1;
CREATE TABLE t2(
id INT NOT NULL,
names VARCHAR(64),
address VARCHAR(132),
PRIMARY KEY (id)
);
insert into t2 select a, f2(f1(12)) , f2(f1(32)) from t1;
set sort_buffer_size=262144*10;
flush status;
select id,
MD5(group_concat(substring(names,1,3), substring(address,1,3)))
FROM t2
GROUP BY id DIV 100
ORDER BY id;
id	MD5(group_concat(substring(names,1,3), substring(address,1,3)))
10	b253ed13e64cf733323d27afc92d11b9
149	43ea485e548da5dd3fcd8c4906dccd7e
232	6ccc7fc342e42192ccdfbb77e85fa433
311	90f94659c39641a213d3744bbffc41e0
430	a53bead2e13ee4bddd5c2fb66c04c917
502	419c219a887215fe89226ed9226bfa1e
665	1e7133708a3e1bc43f37d7173996743b
719	9a6863e2c59ea8b03395f8ff8df49412
883	5ebe88422a3a7a4df6048471b1371392
942	51747d9e4b077ed1426cc23e76865cf0
1007	ba48b7a8d9ce563b2ee39a52bd1283e5
1134	800292609f2c2a3a794e3afe20d17e20
1226	c72aaf8bbd16c026d0ba70c15e2ba31d
1367	4b6b782916e30ac4f87353faa63e5784
1486	cd4ba93263a8f1b90b16017c2a12581f
1502	08be1a9c9d0fe26afa885dece8dff600
1674	5ee5624374baf6a2fdb69a760a9c1e3c
1781	a569b76cce1a35bcebd4629700fae8da
1803	0f882c91efad7865d9a808a8905bdcd2
1969	3bb29bf3c1ffa7e33825e426ba3a67fe
2087	4c8ded95fd37400de735ebd6613f28d1
2111	92f1941edd43dd254471c758dcec0125
2268	e577a7e2de58d4097693fec26179564d
2328	c74d953831057abf57019a847af38982
2416	185c279928fe6860d70635be36e59f81
2599	d0e84deb33d2b299c914b3d0ffbf56c8
2602	bba2e5c462eb682aeaf4d423fe088f88
2777	8acf4418303155237e2e45973a95e03b
2858	4e503f79070142fcc39161cfcee3d5cc
2922	54c4420bd27edd931db9de43dc78e304
3027	8c7edeec29069b0369024f771a208ccf
3131	b72b4098fa4cc8b7ca9e44ebf49bfdcd
3220	1447ca382f80c823aa769692af4c79a4
3331	37c48ec7c7f6d6e402431d4ce9162ca3
3452	54396ef321b22670fdf76372c102278f
3519	331a7e1f8f758db2f83c35a7dd6169de
3680	909128ecfc539d004852a1b085d97b0a
3799	4f36d7d8844cd0ef2d09c5ecb4a0e147
3876	42038816d752bf58f15fdaab41326c85
3937	b79796f21d78da6908b06a393deae228
4029	4225c1b7b0242f9f52b373ff08bdaa35
4158	3ded3bb37f1d6beaeff4b144c44f6283
4291	09c7086bada0918fb7b49cb5d18cbc63
4355	9bc74fee3974ac0a37d5aeb47b3e8fe7
4461	a208fdfd27499fb25e1e4fb17474ad2d
4544	985d5096cb3e7721bf2bda5b3652aa6e
4646	4111a94e90540d2869d1a4443048ff5b
4714	a50de2a7c76405fd7e9ee4a245b7443e
4848	4f3d9f6c2214d1dbfcbeb52d24db4803
4935	196434d066598e31480970cef6858992
5014	64a725bcf6bf00ea93a974cc5e67faed
5184	3b13c7d69d2cf79295a99517c37917e5
5219	9ea5ef3ad046b49a696bcbb1f6b46073
5349	cb541d0cc1deec0309330d23384e6b73
5400	d13a8f18ff97c555f94016765084ffa1
5507	f22f063f95f49d447fe668612c6df270
5672	8d4d95cb5e75e377b0316fd0ebda84f0
5725	f93deb9bf142a233c487441989500ad2
5849	1a3f23db800626853f20df9912eda5bb
5941	202f31698078ca21ba5ea37fa20c0a12
6064	1b3a59f5cb65c1710253ea455aeb6e65
6135	d13e27505091f5a2e1b645ce77daa2a1
6289	c92136d3d26acd47d132ddfc78adc729
6329	f3ea174f4de598bc6d7d2d2c464acb14
6404	54110ca947fa2d23c9735b7e5a5a50cf
6580	9478efd805dc2f2e3f1e770f3097d1d1
6653	d5267e02f46dc3d2f169ea3f578371e8
6773	f18e4f7005b81d1a950d4a1bba8b1534
6822	9f8860eaf35ba68cfeb0ad6a78a2cc56
6938	78e2b08e77fb6d969550b7eb1967da28
7085	bbbd509f22273997f5461c10b17075d4
7180	9e18b5a59366df9ad7a62a4f424153ed
7290	0a60c3d6661499de48d2ced87409e9bb
7390	93e875e3c9d690e1d01198c0c44c3cb2
7449	c98c9cb4d00db6c707e284c0f318c9fc
7589	e2058c36596b0d23b4b1f2ca8591e6be
7686	0f182c5acb930902f62cdcf428f4745f
7713	eebff08db371b43703acf8aba8e483b1
7844	3036d395f077b96f89e1b7bc5986ceb6
7935	3b67bd296f31c17da7074dda34590d7b
8059	d7ff3396e0a4739f867438d60e93bac8
8153	6e8a00cd8f006010c295195a3c7eef01
8245	e65335846dde70d2e22687026b03a35f
8310	d1959cf02010be41a5294c86acd1fb07
8432	db80164eee1baf3c95c2d34796ca8d4b
8596	f4774e3f3aa83c5ff8d4053df36cb3a6
8647	00a98557e738bb097ab4de083507479e
8742	407e13848129bacb38edd4a12ce696cf
8856	18fef961b5144c669a43eb010d02e972
8967	741b7ff21a3e73cb47092f43d85e8c6c
9057	ace84e526e26f0497f3621192d0e4a84
9148	a2268d21fcdfafc04e22422cfff90bc8
9275	811cc7fc2a15d64fe3c3b6caf84b92c7
9311	15d529de7dc6536040dc2a1d8fd25013
9488	1c9331758eb2a3675891b8af982d79c1
9518	1cbde8577db1d61225037045d9706666
9696	7a6fcd67a46a3a5a5ed2efd0848c9e92
9752	b0d433f38ca8f67f079d87789ad40618
9887	b125b717470a8260dfdaf0b90a1b9d70
9903	602cdc924ea991d73014a15b5404e1d8
10000	d450f3b4dc99fa4f0ed6046e770ba3ee
show status like '%sort%';
Variable_name	Value
Sort_merge_passes	0
Sort_priority_queue_sorts	0
Sort_range	0
Sort_rows	10101
Sort_scan	2
set sort_buffer_size=default;
set @@RAND_SEED1= @save_rand_seed1;
set @@RAND_SEED2= @save_rand_seed2;
drop function f1;
drop function f2;
drop table t1,t2,t3;
